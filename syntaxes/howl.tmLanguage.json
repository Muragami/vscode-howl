{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "howl",
	"patterns": [
        { "include": "#code" }
    ],
    "repository": {
        "docComment": {
            "name": "comment.line.documentation.howl",
            "match": "///.*"
        },
        "comment": {
            "name": "comment.line.howl",
            "match": "//.*"
        },
        "blockComment": {
            "name": "comment.block.howl",
            "begin": "/\\*",
            "end": "\\*/",
            "patterns": [ { "include": "#blockComment" } ]
        },
        "block": {
            "begin": ":",
            "beginCaptures": {
                "0": {
                    "name": "punctuation.section.block.begin.howl"
                }
            },
            "end": ";",
            "endCaptures": {
                "0": {
                    "name": "punctuation.section.block.end.howl"
                }
            },
            "name": "meta.block.howl",
            "patterns": [
                { "include": "#code" },
                {
                    "name": "meta.block.parameters.wren",
                    "begin": "(?<=\\{)\\s*\\|",
                    "end": "\\|",
                    "patterns": [
                        {
                            "name": "variable.parameter.function.wren",
                            "match": "\\w+"
                        }
                    ]
                }
            ]
        },
        "keyword": {
            "patterns": [
                {
                    "name": "keyword.control.howl",
                    "match": "\\b(?:as|break|const|continue|else|for|from|if|import|in|return|while|var)\\b"
                },
                {
                    "name": "keyword.operator.howl",
                    "match": "\\b(is|#)\\b"
                },
                {
                    "name": "keyword.operator.logical.howl",
                    "match": "!|&&|\\|\\|"
                },
                {
                    "name": "keyword.operator.range.howl",
                    "match": "(\\.\\.\\.?)"
                },
                {
                    "name": "keyword.operator.arithmetic.howl",
                    "match": "(\\-|\\+|\\*|\/|%)"
                },
                {
                    "name": "keyword.operator.comparison.howl",
                    "match": "(==|!=|<=|>=|<|>)"
                },
                {
                    "name": "keyword.operator.assignment.howl",
                    "match": "(=|@=|=@)"
                },
                {
                    "name": "keyword.operator.bitwise.wren",
                    "match": "&|\\||\\^|<<|>>"
                }
            ]
        },
        "constant": {
            "patterns": [
                {
                    "name": "constant.language.howl",
                    "match": "\\b(true|false|null)\\b"
                },
                {
                    "name": "constant.numeric.howl",
                    "match": "\\b(0x[0-9a-fA-F]*|[0-9]+(\\.?[0-9]*)?([eE](\\+|-)?[0-9]+)?)\\b"
                },
                {
                    "name": "constant.numeric.hexadecimal.howl",
                    "match": "0x[A-Fa-f0-9]+"
                }
            ]
        },
        "variable": {
            "patterns": [
                {
                    "name": "variable.language.howl",
                    "match": "\\b(this|super)\\b"
                },
                {
                    "name": "variable.other.class.howl",
                    "match": "\\b__\\w*"
                },
                {
                    "name": "variable.other.instance.howl",
                    "match": "\\b_\\w*"
                }
            ]
        },
        "field": {
            "patterns": [
                {
                    "name": "variable.other.instance.howl",
                    "match": "\\b_\\w*"
                }
            ]
        },
        "string": {
            "name": "string.quoted.double.howl",
            "begin": "\"",
            "end": "\"",
            "patterns": [
                { "include": "#stringEscapes" }
            ]
        },
        "stringEscapes": {
            "patterns": [
                {
                    "name": "constant.character.escape.howl",
                    "match": "\\\\(?:[0\"\\abefnrtv]|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{4})"
                },
                {
                    "name": "invalid.illegal.unknown-escape.howl",
                    "match": "\\\\(?:x[0-9A-Fa-f]{0,1}|u[0-9A-Fa-f]{0,3}|U[0-9A-Fa-f]{0,7}|.)"
                },
                {
                    "name": "constant.character.interpolation.howl",
                    "match": "%\\((.*?)\\)"
                }
            ]
        },
        "multilineString": {
            "name": "string.quoted.multi.howl",
            "begin": "\"\"\"",
            "end": "\"\"\""
        },
        "function": {
            "name": "meta.function.howl",
            "match": "(?:[.]|\\b)(\\w+)\\(",
            "captures": {
                "1": { "name": "entity.name.function.howl" }
            }
        },
        "static_function": {
            "name": "meta.static_function.howl",
            "match": "\\b([A-Z]+\\w*)[.](\\w+)\\(",
            "captures": {
                "1": { "name": "entity.name.type.howl" },
                "2": { "name": "entity.name.function.class.howl" }
            }
        },
        "static_constant": {
            "name": "meta.static_constant.howl",
            "match": "\\b([A-Z]+\\w*)[.](\\w+)\\b",
            "captures": {
                "1": { "name": "entity.name.type.howl" },
                "2": { "name": "variable.other.constant" }
            }
        },
        "code": {
            "patterns": [
                { "include": "#class" },
                { "include": "#blockComment" },
                { "include": "#docComment" },
                { "include": "#comment" },
                { "include": "#block" },
                { "include": "#keyword" },
                { "include": "#constant" },
                { "include": "#variable" },
                { "include": "#string" },
                { "include": "#multilineString" },
                { "include": "#function" },
                { "include": "#static_function" },
                { "include": "#static_constant" }
            ]
        },
        "method": {
            "name": "meta.method.howl",
            "begin": "(?:\\b(construct)\\s+)?(\\w+=|\\w+|\\+|-|\\*|\\/|%|<=?|>=?|==|!=?|&|\\||~|@=|=@|#)",
            "beginCaptures": {
                "1": { "name": "storage.modifier.howl" },
                "2": { "name": "entity.name.function.howl" }
            },
            "end": ";",
            "patterns": [
                {
                    "name": "meta.method.identifier.howl",
                    "begin": "\\(",
                    "end": "\\)",
                    "patterns": [
                        {
                            "name": "variable.parameter.function.howl",
                            "match": "\\w+"
                        }
                    ]
                },
                {
                    "name": "meta.method.body.howl",
                    "begin": ":",
                    "end": "(?=;)",
                    "patterns": [
                        { "include": "#code" }
                    ]
                }
            ]
        },
        "subscriptOperatorSetter": {
            "name": "meta.method.subscript.setter.howl",
            "begin": "\\[([^\\]]+)\\]\\s*=\\s*\\(([^)]*)\\)\\s*\\{",
            "beginCaptures": {
                "0": { "name": "entity.name.function.howl" }
            },
            "end": "}",
            "patterns": [
                { "include": "#code" }
            ]
        },
        "subscriptOperatorGetter": {
            "name": "meta.method.subscript.getter.howl",
            "begin": "\\[([^\\]]+)\\]\\s*\\{",
            "beginCaptures": {
                "0": { "name": "entity.name.function.howl" }
            },
            "end": "}",
            "patterns": [
                { "include": "#code" }
            ]
        },
        "class": {
            "name": "meta.class",
            "begin": "(?:\\b(static)\\s+)?(\\bclass)\\s+(\\w+)\\s+(?:(\\bis)\\s+(\\w+))?",
            "beginCaptures": {
                "1": { "name": "storage.modifier.howl" },
                "2": { "name": "storage.modifier.howl" },
                "3": { "name": "entity.name.class.howl" },
                "4": { "name": "storage.modifier.howl" },
                "5": { "name": "entity.name.class.howl" }
            },
            "end": ";",
            "endCaptures": {
                "0": { "name": "punctuation.section.class.end.howl" }
            },
            "patterns": [
                {
                    "name": "meta.class.body.howl",
                    "begin": ":",
                    "beginCaptures": {
                        "0": { "name": "punctuation.section.class.begin.howl" }
                    },
                    "patterns": [
                        { "include": "#docComment" },
                        { "include": "#comment" },
                        { "include": "#blockComment" },
                        { "include": "#subscriptOperatorSetter" },
                        { "include": "#subscriptOperatorGetter" },
                        { "include": "#method" },
                        { "include": "#field" }
                    ],
                    "end": "(?=;)"
                }
            ]
        }
	},
	"scopeName": "source.howl"
}